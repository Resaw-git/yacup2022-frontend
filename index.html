<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Yandex Cup 2022. Квалификации Фронтенд</title>
    <link rel="stylesheet" href="table.css">
    <link rel="stylesheet" href="prism.css">
    <link rel="stylesheet" href="font/font.css">
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <header class="header">
        <a href="/">
            <svg width="218" height="37" viewBox="0 0 218 37" fill="none"><path d="M0 18.5C0 8.294 8.294 0 18.5 0S37 8.294 37 18.5 28.706 37 18.5 37 0 28.706 0 18.5z" fill="#FF0849"></path><path d="M21.213 10.36h-1.88c-3.207 0-4.81 1.603-4.81 4.008 0 2.683 1.079 4.009 3.484 5.612l1.88 1.326-5.334 8.294h-4.286l5.088-7.493c-2.93-2.127-4.533-4.008-4.533-7.492 0-4.286 2.93-7.215 8.572-7.215h5.581v22.2h-3.73V10.36h-.032z" fill="#fff"></path><path d="M207.435 21.435h-7.527v-4.357h.924c1.981 0 3.17 0 4.226-.66.925-.661 1.321-1.321 1.321-2.246 0-1.32-1.057-2.509-2.509-2.509-1.189 0-2.509.792-2.509 2.51v.66h-1.453v-.66c0-2.246 1.717-3.963 3.962-3.963 2.113 0 3.961 1.717 3.961 3.962 0 1.453-.66 2.51-1.848 3.434-1.321.924-2.642.924-4.49.924v1.453h6.074v1.452h-.132zm9.592 0H209.5v-4.357h.924c1.981 0 3.17 0 4.226-.66.925-.661 1.321-1.321 1.321-2.246 0-1.32-1.057-2.509-2.509-2.509-1.189 0-2.509.792-2.509 2.51v.66H209.5v-.66c0-2.246 1.717-3.963 3.962-3.963 2.113 0 3.961 1.717 3.961 3.962 0 1.453-.66 2.51-1.848 3.434-1.321.924-2.641.924-4.49.924v1.453h6.074v1.452h-.132z" fill="#A8DB10"></path><path d="M81.055 20.115v7.395h-2.244v-7.263L73 10.607h2.51l4.49 7.79 4.621-7.79h2.113l-5.678 9.508zM94.13 27.51c-.133-.264-.133-.528-.133-.924s-.132-.793-.132-1.189c-.132.264-.264.528-.528.793l-.792.792c-.264.264-.66.396-1.189.528a4.924 4.924 0 01-1.585.264c-1.056 0-1.98-.264-2.773-.924-.66-.528-1.056-1.453-1.056-2.641 0-1.32.528-2.245 1.584-2.906 1.057-.66 2.642-.924 4.887-.924h1.32V19.19c0-.924-.264-1.584-.66-1.98-.396-.397-1.189-.66-2.245-.66-.793 0-1.453.131-2.245.395-.66.265-1.32.529-1.717.925v-1.585a4.25 4.25 0 011.717-1.056 7.689 7.689 0 012.509-.396c1.585 0 2.773.264 3.566.924.792.66 1.188 1.585 1.188 2.905v7.66c0 .396.132.792.132.924H94.13v.264zm-3.83-1.188c.528 0 1.056-.133 1.452-.264a2.877 2.877 0 001.057-.66c.264-.265.528-.661.66-.925.132-.396.264-.66.264-1.057v-1.584h-1.056c-.925 0-1.585 0-2.245.132-.529.132-1.057.264-1.453.396-.396.264-.66.528-.792.792s-.264.66-.264 1.189c0 .792.132 1.32.528 1.584.66.133 1.188.397 1.849.397zm14.13-9.641c-.925 0-1.717.264-2.245.66-.528.397-1.057 1.057-1.453 1.717v8.452h-2.113V15.228h1.981l.132 2.246a3.308 3.308 0 011.585-1.717c.66-.528 1.585-.66 2.641-.66 1.189 0 2.245.264 2.905.924.661.66 1.057 1.584 1.057 2.905v8.584h-2.113v-8.452c0-.924-.264-1.453-.66-1.849-.397-.396-1.057-.528-1.717-.528zM120.673 25a5.837 5.837 0 01-1.585 1.982c-.66.528-1.584.792-2.641.792a5.474 5.474 0 01-2.113-.396c-.66-.264-1.188-.66-1.717-1.189-.528-.528-.924-1.188-1.188-1.98-.264-.793-.396-1.717-.396-2.774 0-1.056.132-1.98.396-2.773.264-.792.66-1.453 1.188-1.98.529-.529 1.057-.925 1.717-1.19a5.475 5.475 0 012.113-.396c.925 0 1.717.133 2.377.529.66.396 1.189.924 1.585 1.584V9.814h2.113V27.51h-1.717l-.132-2.51zm-3.962 1.322c.528 0 1.057-.133 1.453-.265.396-.264.792-.528 1.188-.924.397-.396.661-.924.793-1.585.132-.66.264-1.32.264-2.113 0-.792-.132-1.584-.264-2.113-.132-.66-.396-1.056-.793-1.584-.396-.396-.792-.66-1.188-.925-.396-.264-.925-.264-1.453-.264-1.056 0-1.981.396-2.641 1.189-.66.792-1.056 1.98-1.056 3.697 0 1.585.396 2.906 1.056 3.698.66.66 1.585 1.189 2.641 1.189zm18.62-.001c-.132.132-.396.264-.66.396a6.422 6.422 0 01-.924.397l-1.189.396c-.396.132-.924.132-1.584.132-2.113 0-3.566-.528-4.755-1.717-1.056-1.056-1.584-2.641-1.584-4.754 0-1.056.132-1.849.396-2.641s.66-1.453 1.188-1.98c.529-.53 1.189-.925 1.849-1.19.661-.264 1.453-.396 2.377-.396.925 0 1.717.132 2.377.396a4.285 4.285 0 011.717 1.321c.396.528.792 1.32.925 2.113.132.924.132 1.849 0 3.037h-8.584c.132 2.774 1.584 4.226 4.358 4.226.924 0 1.716-.132 2.377-.396.66-.264 1.188-.528 1.716-.924v1.584zm-4.886-9.904c-.924 0-1.849.396-2.377 1.056-.66.66-1.056 1.717-1.188 3.038h6.603c.132-1.32-.132-2.377-.661-3.037-.528-.66-1.32-1.057-2.377-1.057zm11.357 6.075l-3.433 5.018h-1.981l4.49-6.339-3.962-5.942h2.509l3.038 4.49 3.037-4.49h1.981l-4.094 5.81 4.226 6.47h-2.509l-3.302-5.017zm19.809 5.282c-1.188 0-2.377-.264-3.433-.66-1.057-.396-1.849-.925-2.642-1.717-.792-.792-1.32-1.717-1.716-2.773a10.258 10.258 0 01-.661-3.698c0-1.452.132-2.64.529-3.697a9.506 9.506 0 011.584-2.774c.661-.792 1.585-1.32 2.641-1.716a10.085 10.085 0 013.566-.66c1.189 0 2.245.131 3.037.396.925.264 1.585.528 2.113.924v1.849c-1.452-.925-3.169-1.32-5.018-1.32-2.113 0-3.566.66-4.622 1.848-.924 1.188-1.453 2.905-1.453 5.15 0 2.245.529 3.962 1.453 5.15.924 1.19 2.509 1.85 4.622 1.85.924 0 1.849-.133 2.641-.397a9.981 9.981 0 002.377-1.188v1.848a6.987 6.987 0 01-1.981 1.057c-.792.264-1.848.528-3.037.528zm13.734-.792c-.66.528-1.585.66-2.641.66-1.189 0-2.113-.264-2.773-.924-.661-.66-1.057-1.585-1.057-2.906v-8.584h2.113v8.584c0 .925.264 1.453.66 1.717.397.264.925.528 1.585.528.925 0 1.585-.264 2.245-.66.528-.396 1.057-1.056 1.453-1.849v-8.32h2.113V27.51h-1.849l-.132-2.245c-.528.66-1.057 1.32-1.717 1.717zm12.414.792a4.558 4.558 0 01-2.377-.66c-.661-.396-1.189-1.057-1.717-1.85V32h-2.113V15.229h1.849l.132 2.377c.396-.793.924-1.453 1.716-1.981.793-.529 1.585-.66 2.642-.66.66 0 1.452.131 1.981.396.66.264 1.188.66 1.716 1.188.528.528.925 1.189 1.189 1.98.264.793.396 1.718.396 2.774 0 1.057-.132 1.981-.396 2.773-.264.793-.661 1.453-1.189 1.981-.528.529-1.056.925-1.716 1.189-.661.396-1.321.528-2.113.528zm-.265-1.453c1.057 0 1.981-.396 2.642-1.188.66-.793 1.056-1.981 1.056-3.698 0-1.717-.396-2.905-1.056-3.697-.661-.793-1.585-1.189-2.642-1.189-.528 0-1.056.132-1.452.264-.528.132-.925.528-1.189.925-.396.396-.66.924-.792 1.584s-.264 1.32-.264 2.245.132 1.585.264 2.245c.132.66.528 1.189.792 1.453.396.396.793.66 1.189.924.396 0 .924.132 1.452.132z" fill="#fff"></path></svg>
        </a>
        <nav class="nav">
            <div class="nav_link nav_link_frontend nav_link_frontend_active">
                Фронтенд
            </div>
            <div class="nav_link nav_link_backend">
                Бэкенд
            </div>
            <div class="nav_link nav_link_mobile">
                Мобильная разработка
            </div>
            <div class="nav_link nav_link_analytics">
                Аналитика
            </div>
            <div class="nav_link nav_link_algorithm">
                Алгоритм
            </div>
            <div class="nav_link nav_link_machine">
                Машинное обучение
            </div>
            <div class="nav_button nav_button_signup">
                Регистрация
            </div>
            <div class="nav_button nav_button_signin">
                Вход
            </div>
        </nav>
    </header>
    <main class="content">
        <div class="container">
            <h1>Задачи квалификации чемпионата по программированию 2022 среди фронтенд-разработчиков</h1>
            <div class="task">
            <h2>A. Время анализировать</h2>
            <h4>Описание</h4>
            <p>
                Перед тем как отправиться в далекий город за запчастями, нужно хотя бы узнать, в каком времени ты находишься. Ты отсоединяешь от хронопорта ноутбук и подключаешь к нему спектроанализатор. По экрану плывут длинные отчеты с химическими формулами, быстро уползая далеко вверх, а тачпад, как назло, не отвечает: работают только кнопки мыши.
            </p>
            <p>
                Придется разработать встраиваемый на страницу скрипт, который сделает взаимодействие со страницей подобно тачскрину, но вместо пальца будет мышь. Можно не тратить время скролл с помощью колеса мышки и сэкономить заряд батареи — его осталось 94%.
            </p>
            <p>
                Мы отказываемся от скролла с помощью колеса мышки: теперь он должен работать через перетаскивание мышью по обеим осям одновременно (аналогично мобильным devtools'ам – нажали, потащили, отпустили). Направление перетаскивания противоположно направлению скролла (если тащим мышку вверх, значит скроллим вниз).
            </p>
            <p>Но кроме скролла ещё должно меняться поведение псевдоклассов :hover и :active. Теперь они должны вести себя следующим образом:</p>
            <ul>
                <li>
                    при наведении курсора на элемент ничего не происходит
                </li>
                <li>
                    при касании элемента (touchstart), он считается :hover и :active одновременно спустя 250мс
                </li>
                <li>
                    при движении пальца (touchmove) элемент теряет состояние :active, но остаётся в :hover
                </li>
                <li>
                    при завершении касания (touchend) элемент так же теряет :active, но остаётся в :hover
                </li>
                <li>
                    если совершить касание за пределами элемента, который уже находится в :hover, то он теряет это состояние
                </li>
            </ul>
            <p>К этому поведению так же применимо всплытие событий.</p>
            <p>Ваш скрипт будет подключен к странице с заранее подготовленными HTML-разметкой и стилями. Будут скроллящийся блок и стили, определённые для :hover и :active состояний, которые должны работать согласно описанию выше.</p>

            <details>
                <summary>
                    Пример и примечание
                </summary>
                <h4>Пример: Эмуляция тачскрина</h4>
                <div class="scrollable-container">
                    <table class="scrollable-container__content table"></table>
                </div>
                <script>
                    const table = document.getElementsByClassName('table').item(0);
                    let tr = document.createElement('tr');

                    for (let i = 0; i < 100; i++) {
                        if (i % 10 === 0) {
                            table.appendChild(tr);

                            tr = document.createElement('tr');
                        }

                        const td = document.createElement('td');

                        td.classList.add('table__cell');
                        td.innerText = `${i}`;

                        tr.appendChild(td);
                    }

                    table.appendChild(tr);
                </script>
                <h4>Примечания:</h4>
                <p>Решение должно содержать только код на JS (оборачивать в тег &lt;script&gt; не нужно).</p>
                <p>По ссылке ниже можно найти архив с примером html-страницы для отладки, на которую будет встроено решение.</p>
                <a href="https://contest.yandex.ru/yacup/contest/40984/download/A/" class="link">
                    Скачать условие задачи
                </a>
            </details>

            <details>
                <summary>
                    <strong>Решение</strong>
                </summary>
                <details>
                    <summary>
                       Показать код
                    </summary>
                    <pre class="  language-javascript">
                    <code class="  language-javascript">
const container = document.querySelector('.scrollable-container')
const sensitive = 10;
const startCord = {x: 0, y: 0};
const currentCord = {x: 0, y: 0};
const lastCord = {x: 0, y: 0};
let mousedown = false;

document.head.querySelector('style')
    .insertAdjacentHTML("beforeend", '.hover { background-color: #c0c0c0; } .active { background-color: #b93434; }');

const cssRules = document.styleSheets[0].cssRules
replaceStyle(cssRules, '.table__cell:hover')
replaceStyle(cssRules, '.table__cell:active')

container.style.userSelect = 'none';
container.style.overflow = 'hidden';
table.style.backgroundColor = '#fff';

container.addEventListener('wheel', (e) => e.preventDefault())

container.addEventListener('mousedown', (e) => {
    const hover = document.querySelector('.hover')
    if (hover) {
        hover.classList.remove('hover')
    }
    e.target.classList.add('hover')
    setTimeout(() => e.target.classList.add('active'), 250)
    mousedown = true;
    getStartCord(e)
});

document.addEventListener('mouseup', () => {
    mousedown = false;
});

container.addEventListener('mouseup', (e) => {
    setTimeout(() => e.target.classList.remove('active'), 250)
});

container.addEventListener('mousemove', e => {
    getCurrentCord(e);
    setTimeout(() => e.target.classList.remove('active'), 250)
    if (mousedown) {
        container.scroll(
            getDifference(startCord.x, currentCord.x, e) + lastCord.x,
            getDifference(startCord.y, currentCord.y, e) + lastCord.y
        );
    }
    getLastCord();
});

function replaceStyle(styleSheet, pseudo) {
    for (let i = 0; i < styleSheet.length; i++) {
        if (styleSheet[i].selectorText === pseudo) {
            styleSheet[i].style.backgroundColor = ""
        }
    }
}

function getDifference(startCord, currentCord, e) {
    const diff = startCord - currentCord
    if (diff > sensitive) {
        getStartCord(e)
        return sensitive
    } else if (diff < -sensitive) {
        getStartCord(e)
        return  -sensitive
    } else return diff
}

function getStartCord(e) {
    startCord.x = e.clientX;
    startCord.y = e.clientY;
}

function getCurrentCord(e) {
    currentCord.x = e.clientX;
    currentCord.y = e.clientY;
}

function getLastCord() {
    lastCord.x = container.scrollLeft;
    lastCord.y = container.scrollTop;
}
                    </code>
                </pre>
                </details>


                <h4>Эмуляция тачскрина</h4>
                <div class="scrollable-container sol-cont">
                    <table class="scrollable-container__content table sol-tabl"></table>
                </div>
                <script>
                    const sol_table = document.querySelector('.sol-tabl');
                    let sol_tr = document.createElement('tr');

                    for (let i = 0; i < 100; i++) {
                        if (i % 10 === 0) {
                            sol_table.appendChild(sol_tr);

                            sol_tr = document.createElement('tr');
                        }

                        const sol_td = document.createElement('td');

                        sol_td.classList.add('table__cell');
                        sol_td.innerText = `${i}`;

                        sol_tr.appendChild(sol_td);
                    }

                    table.appendChild(tr);
                </script>

                <script>
                    const container = document.querySelector('.sol-cont')
                    const sensitive = 10;
                    const startCord = {x: 0, y: 0};
                    const currentCord = {x: 0, y: 0};
                    const lastCord = {x: 0, y: 0};
                    let mousedown = false;

                    const cssRules = document.styleSheets[0].cssRules
                    replaceStyle(cssRules, '.table__cell:hover')
                    replaceStyle(cssRules, '.table__cell:active')

                    container.style.userSelect = 'none';
                    container.style.overflow = 'hidden';
                    sol_table.style.backgroundColor = '#fff';

                    container.addEventListener('wheel', (e) => e.preventDefault())

                    container.addEventListener('mousedown', (e) => {
                        const hover = document.querySelector('.hover')
                        if (hover) {
                            hover.classList.remove('hover')
                        }
                        e.target.classList.add('hover')
                        setTimeout(() => e.target.classList.add('active'), 250)
                        mousedown = true;
                        getStartCord(e)
                    });

                    document.addEventListener('mouseup', () => {
                        mousedown = false;
                    });

                    container.addEventListener('mouseup', (e) => {
                        setTimeout(() => e.target.classList.remove('active'), 250)
                    });

                    container.addEventListener('mousemove', e => {
                        getCurrentCord(e);
                        setTimeout(() => e.target.classList.remove('active'), 250)
                        if (mousedown) {
                            container.scroll(
                                getDifference(startCord.x, currentCord.x, e) + lastCord.x,
                                getDifference(startCord.y, currentCord.y, e) + lastCord.y
                            );
                        }
                        getLastCord();
                    });

                    function replaceStyle(styleSheet, pseudo) {
                        for (let i = 0; i < styleSheet.length; i++) {
                            if (styleSheet[i].selectorText === pseudo) {
                                styleSheet[i].style.backgroundColor = ""
                            }
                        }
                    }

                    function getDifference(startCord, currentCord, e) {
                        const diff = startCord - currentCord
                        if (diff > sensitive) {
                            getStartCord(e)
                            return sensitive
                        } else if (diff < -sensitive) {
                            getStartCord(e)
                            return  -sensitive
                        } else return diff
                    }

                    function getStartCord(e) {
                        startCord.x = e.clientX;
                        startCord.y = e.clientY;
                    }

                    function getCurrentCord(e) {
                        currentCord.x = e.clientX;
                        currentCord.y = e.clientY;
                    }

                    function getLastCord() {
                        lastCord.x = container.scrollLeft;
                        lastCord.y = container.scrollTop;
                    }
                </script>
            </details>
            </div>

            <div class="task">
                <h2>C. Плохие новости</h2>
                <h4>Описание</h4>
                <p>
                    Расшифровав сообщения, ты холодеешь. Компьютер буднично сообщал, что до столкновения с астероидом остается меньше пяти часов, и предлагал проследовать в космопорт, чтобы покинуть планету. Похоже, те, кто построил город, благоразумно прислушались к совету. Хорошо бы узнать, как именно они выбрались отсюда, если хронопорт не удастся починить вовремя.
                </p>
                <p>
                    На улице ты замечаешь вышки, которые могли быть частью навигационного оборудования для местного транспорта. Подключившись к системе с помощью старинного компьютера, ты видишь, что вышки в разное время регистрировали подключение последнего шаттла, который, вероятно, следовал к космопорту. Осталось вычислить его путь и понять, где он находится сейчас. И почему эта цивилизация не изобрела обычной зарядки для ноута? Батарея показывала 79%.
                </p>
                <p>Условия: </p>
                <ul>
                    <li>
                        Напишите функцию triangulation, которая будет отрисовывать станции и примерное местонахождение пользователя.
                    </li>
                    <li>
                        Территорию представляет блок .Map размером 500x500px;
                    </li>
                    <li>
                        Базовая станция отображается черной (#000) точкой 20х20px;
                    </li>
                    <li>
                        Радиус покрытия – это окружность толщины 1px и цветом #000;
                    </li>
                    <li>
                        На вход получаем два списка, первый - список базовых станций, второй - список id станций, зарегистрировавших пользователя в определенные моменты (единовременно пользователя регистрируют как минимум две станции);
                    </li>
                    <li>
                        Территорию, где находился пользователь в зависимости от регистрации у тех или иных вышек заливаем цветом. Цвет меняется инкрементально, в зависимости от положения элемента во входном списке (прим: 0-е пересечение - #000, 3-е - #333, 10-е - #aaa).
                    </li>
                </ul>
                <pre class="  language-javascript">
                    <code class="  language-javascript">
interface Station {
    id: number;
    x: number;
    y: number;
    r: number;
}

function triangulation(stations: Station[], stationIds: number[][]) {
    // code
}</code>
                </pre>
                <details>
                    <summary>
                        Примеры и примечание
                    </summary>
                    <details>
                        <summary>
                            Скриншоты ожидаемого результата:
                        </summary>
                        <div class="images">
                            <img src="image/example1.png" alt="example" width="250" height="250" title="Пример 1">
                            <img src="image/example2.png" alt="example" width="250" height="250" title="Пример 2">
                            <img src="image/example3.png" alt="example" width="250" height="250" title="Пример 3">
                        </div>
                    </details>
                    <p>Пример 1:</p>
                    <pre class="  language-javascript">
                    <code class="  language-javascript">
const stations = [{
    "id": 1,
    "x": 350,
    "y": 370,
    "r": 220
  },
  {
    "id": 2,
    "x": 170,
    "y": 130,
    "r": 190
  }];

const stationIds = [[1, 2]]</code>
                </pre>

                    <p>Пример 2:</p>
                    <pre class="  language-javascript">
                    <code class="  language-javascript">
const stations = [{
    "id": 1,
    "x": 100,
    "y": 100,
    "r": 100
  }, {
    "id": 2,
    "x": 350,
    "y": 120,
    "r": 180
  }, {
    "id": 3,
    "x": 150,
    "y": 330,
    "r": 180
  }, {
    "id": 4,
    "x": 410,
    "y": 390,
    "r": 150
  }];

const stationIds = [
    [1, 2],
    [2, 3],
    [3, 4]
  ]</code>
                </pre>

                    <p>Пример 3:</p>
                    <pre class="language-javascript">
                    <code class="language-javascript">
const stations = [{
    "id": 1,
    "x": 250,
    "y": 100,
    "r": 160
  }, {
    "id": 2,
    "x": 125,
    "y": 325,
    "r": 160
  }, {
    "id": 3,
    "x": 375,
    "y": 325,
    "r": 160
  }];

const stationIds = [[1, 2, 3]];</code>
                </pre>
                    <h4>Примечания:</h4>
                        <p>Решение должно представлять из себя один HTML-файл (все нужные скрипты и стили должны быть включены внутрь).</p>
                    <p><strong>Важно! </strong>Автоматические тесты будут запущены на вызов функции window.onSolutionReady(), которая декларируется автоматически в тестовом окружении (не нужно её переопределять) и уже вызывается в шаблоне (без необходимости не нужно менять эту часть кода). Если вызов функции window.onSolutionReady() не произойдёт в течение 2 минут, то задание считается невыполненным. Структура HTML из шаблона решения должна быть сохранена.</p>
                    <p>Ваше решение будет тестироваться в последней версии браузера Google Chrome.</p>
                    <a href="https://contest.yandex.ru/yacup/contest/40984/download/C/" class="link">
                        Скачать условие задачи
                    </a>
                </details>

                <details>
                    <summary>
                        <strong>Решение</strong>
                    </summary>
                    <pre class="language-javascript">
                        <code class="language-javascript">
function triangulation(stations, stationIds) {
    const svg = document.createElementNS('http://www.w3.org/2000/svg', 'svg');
    svg.setAttribute('viewBox', '0 0 500 500');
    svg.setAttribute('stroke', 'black');
    document.querySelector('.Map').appendChild(svg);

    const defs = document.createElementNS('http://www.w3.org/2000/svg', 'defs');
    svg.appendChild(defs);

    function group(id, appendTo) {
        const groupName = document.createElementNS('http://www.w3.org/2000/svg', 'g');
        groupName.setAttribute('id', id);
        appendTo.appendChild(groupName);
        return groupName;
    }

    const groupDots = group('groupDots', svg);
    const groupCircle = group('groupDots', defs);
    const groupClips = group('groupClips', defs);

    function renderDots(station) {
        const dot = document.createElementNS('http://www.w3.org/2000/svg', 'circle');
        dot.setAttribute('fill', '#000');
        dot.setAttribute('r', '10');
        dot.setAttribute('cx', station.x);
        dot.setAttribute('cy', station.y);
        groupDots.appendChild(dot)
    }

    function renderCircle(station) {
        const circle = document.createElementNS('http://www.w3.org/2000/svg', 'circle');
        circle.setAttribute('stroke', '#000');
        circle.setAttribute('r', station.r);
        circle.setAttribute('cx', station.x);
        circle.setAttribute('cy', station.y);
        circle.setAttribute('id', `circle_${station.id}`);
        groupCircle.appendChild(circle);

        const use = document.createElementNS('http://www.w3.org/2000/svg', 'use');
        use.setAttributeNS('http://www.w3.org/1999/xlink', 'xlink:href', `#circle_${station.id}`);
        use.setAttribute('stroke', '#000');
        use.setAttribute('fill', 'none');
        svg.appendChild(use);
    }

    let clipNumber = 0;
    let color = 0;

    function renderIntersections(stationIds) {
        stationIds.forEach(el => {
            let hex = `#${color.toString(16)}${color.toString(16)}${color.toString(16)}`
            el.forEach((element, index) => {
                if (index === 0) {
                    const clip = document.createElementNS('http://www.w3.org/2000/svg', 'clipPath');
                    clip.setAttribute('id', `clip${clipNumber}`);
                    groupClips.appendChild(clip);

                    const use = document.createElementNS('http://www.w3.org/2000/svg', 'use');
                    use.setAttributeNS('http://www.w3.org/1999/xlink', 'xlink:href',  `#circle_${element}`);
                    document.getElementById(`clip${clipNumber}`).appendChild(use);
                    ++clipNumber;
                    return;
                }

                if (index === el.length - 1) {
                    const intersection = document.createElementNS('http://www.w3.org/2000/svg', 'use');
                    intersection.setAttributeNS('http://www.w3.org/1999/xlink', 'xlink:href', `#circle_${element}`);
                    intersection.setAttribute('fill', hex);
                    intersection.setAttribute('clip-path', `url(#clip${clipNumber - 1})`);
                    svg.appendChild(intersection);
                    ++color;
                    return;
                }

                const clip = document.createElementNS('http://www.w3.org/2000/svg', 'clipPath');
                clip.setAttribute('id', `clip${clipNumber}`);
                groupClips.appendChild(clip);

                const use = document.createElementNS('http://www.w3.org/2000/svg', 'use');
                use.setAttributeNS('http://www.w3.org/1999/xlink', 'xlink:href',  `#circle_${element}`);
                use.setAttribute('clip-path',  `url(#clip${clipNumber - 1})`);
                document.getElementById(`clip${clipNumber}`).appendChild(use);
                ++clipNumber;
            })
        })
    }


    stations.map((el) => {
        renderDots(el);
        renderCircle(el);
    })
    renderIntersections(stationIds);
}
                        </code>
                    </pre>
                </details>
            </div>

        </div>


    </main>





<script src="prism.js"></script>
</body>
</html>